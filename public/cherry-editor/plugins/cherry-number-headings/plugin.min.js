!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.util.Delay");e.add("cherry-number-headings",function(a){var r=!1;a.ui.registry.addToggleButton("ch-number-headings",{tooltip:"Number Headings",icon:"number-headings",onAction:function(){r=!r,a.fire("NumberHeadingsToggleStateChange")},onSetup:function(e){var n=function(){var i,o;e.setActive(r),o=a.$,r?(i=[],o("h1,h2,h3,h4").each(function(){var e=Number(this.nodeName[1]);i.length>=e?i[e-1]++:i.push(1,1,1,1),i.length=e;var n,t=o(this).find(".nh-number");0<t.length&&(n=t.text().replace(/^\s*(\d\.?)+\s?/,""),o(this).prepend(n)),o(this).prepend('<span class="nh-number">'+i.join(".")+". </span>"),t.remove()})):o("span.nh-number").remove()},t=i.debounce(function(){var e=0<a.$("span.nh-number").length;e!==r&&(r=e,a.fire("NumberHeadingsToggleStateChange"))});return a.on("NumberHeadingsToggleStateChange",n),a.on("LoadContent SetContent input",t),function(){a.off("NumberHeadingsToggleStateChange",n),a.off("LoadContent SetContent input",t)}}})})}();