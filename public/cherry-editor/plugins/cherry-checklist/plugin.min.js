!function(){"use strict";var Ze=tinymce.util.Tools.resolve("tinymce.PluginManager"),en=(tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),tinymce.util.Tools.resolve("tinymce.util.Tools"),function(e,r){return function o(e){var n=!1;if(!e)return!1;{if("A"===e.nodeName&&e.getAttribute("is-tapdlink")&&-1<r.indexOf(e.getAttribute("mode")))return!0;if("A"!==e.nodeName){var t=e.querySelectorAll('a[is-tapdlink="true"]');if(!t.length)return!1;t.forEach(function(e){n=n||o(e)})}}return n}(e.selection.getNode())||!1});!function(){var e,o=window;function u(e){return function(){return e}}function n(){return s}var t,i=u(!1),c=u(!0),s=(e={fold:function(e,n){return e()},is:i,isSome:i,isNone:c,getOr:f,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:f,orThunk:a,map:n,each:function(){},bind:n,exists:i,forall:c,filter:n,equals:r,equals_:r,toArray:function(){return[]},toString:u("none()")},Object.freeze&&Object.freeze(e),e);function r(e){return e.isNone()}function a(e){return e()}function f(e){return e}function l(n){return function(e){return function(e){if(null===e)return"null";var n=typeof e;return"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(e)===n}}function d(e,n){return-1<se.call(e,n)}function m(e,n){for(var t=e.length,r=new Array(t),o=0;o<t;o++){var i=e[o];r[o]=n(i,o)}return r}function v(e,n){for(var t=0,r=e.length;t<r;t++)n(e[t],t)}function h(e){return e.dom().nodeName.toLowerCase()}function g(e,n,t){if(!(oe(t)||ie(t)||ce(t)))throw o.console.error("Invalid call to Attr.set. Key ",n,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,""+t)}function p(e,n,t){g(e.dom(),n,t)}function x(e,n){var u=e.dom();!function(e){for(var n,t=te(e),r=0,o=t.length;r<o;r++){var i=t[r];n=e[i],g(u,i,n)}}(n)}function w(e,n){e.dom().removeAttribute(n)}function O(e){return n=e.dom().attributes,r={},v(n,function(e){var n,t;(n=r)[(t=e).name]=t.value,r=n}),r;var n,r}function S(e,n){var t,r,o=(t=n,null===(r=e.dom().getAttribute(t))?void 0:r);return void 0===o||""===o?[]:o.split(" ")}function y(e){return void 0!==e.dom().classList}function k(e){return S(e,"class")}function b(e,n){return t=n,p(e,"class",S(e,"class").concat([t]).join(" ")),!0;var t}function N(e,n){return i=n,0<(o=function(e){for(var n=[],t=0,r=e.length;t<r;t++){var o=e[t];o!==i&&n.push(o)}return n}(S(t=e,r="class"))).length?p(t,r,o.join(" ")):w(t,r),!1;var t,r,i,o}function T(e,n){y(e)?e.dom().classList.add(n):b(e,n)}function L(e,n){var t;y(e)?e.dom().classList.remove(n):N(e,n),0===(y(t=e)?t.dom().classList:k(t)).length&&w(t,"class")}function A(e,n){return y(e)&&e.dom().classList.contains(n)}function D(e,n){return function(){return n===e}}function E(e,n){return function(){return n===e}}function C(e,n){var o=String(n).toLowerCase();return function(e){for(var n=0,t=e.length;n<t;n++){var r=e[n];if(r.search(o))return ne.some(r)}return ne.none()}(e)}function M(e,n){return-1!==e.indexOf(n)}function R(n){return function(e){return M(e,n)}}function P(e,n){var t=e.dom();if(t.nodeType!==Pe)return!1;var r=t;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}var j,I,B,_,F,X,q,U,W,z,H,V,$,K,Y,G,J,Q,Z,ee=function(t){function e(){return o}function n(e){return e(t)}var r=u(t),o={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:c,isNone:i,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return ee(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?o:s},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(i,function(e){return n(t,e)})}};return o},ne={some:ee,none:n,from:function(e){return null==e?s:ee(e)}},te=Object.keys,re=Object.hasOwnProperty,oe=l("string"),ie=l("boolean"),ue=l("function"),ce=l("number"),se=Array.prototype.indexOf,ae=(ue(Array.from)&&Array.from,o.Node.DOCUMENT_NODE),fe=o.Node.ELEMENT_NODE,le=o.Node.TEXT_NODE,de=(void 0!==o.window?o.window:Function("return this;")(),t=le,function(e){return e.dom().nodeType===t}),me=function(e){function n(){return t}var t=e;return{get:n,set:function(e){t=e},clone:function(){return me(t)}}},ve=function(){return he(0,0)},he=function(e,n){return{major:e,minor:n}},ge=function(e,n){var t=String(n).toLowerCase();return 0===e.length?ve():function(e,n){var t=function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.test(n))return r}}(e,n);if(!t)return{major:0,minor:0};function r(e){return Number(n.replace(t,"$"+e))}return he(r(1),r(2))}(e,t)},pe=ve,xe="Firefox",we=function(e){var n=e.current;return{current:n,version:e.version,isEdge:D("Edge",n),isChrome:D("Chrome",n),isIE:D("IE",n),isOpera:D("Opera",n),isFirefox:D(xe,n),isSafari:D("Safari",n)}},Oe=function(){return we({current:void 0,version:pe()})},Se=we,ye=(u("Edge"),u("Chrome"),u("IE"),u("Opera"),u(xe),u("Safari"),"Windows"),ke="Android",be="Solaris",Ne="FreeBSD",Te=function(e){var n=e.current;return{current:n,version:e.version,isWindows:E(ye,n),isiOS:E("iOS",n),isAndroid:E(ke,n),isOSX:E("OSX",n),isLinux:E("Linux",n),isSolaris:E(be,n),isFreeBSD:E(Ne,n)}},Le=function(){return Te({current:void 0,version:pe()})},Ae=Te,De=(u(ye),u("iOS"),u(ke),u("Linux"),u("OSX"),u(be),u(Ne),/.*?version\/\ ?([0-9]+)\.([0-9]+).*/),Ee={browsers:u([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return M(e,"edge/")&&M(e,"chrome")&&M(e,"safari")&&M(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,De],search:function(e){return M(e,"chrome")&&!M(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return M(e,"msie")||M(e,"trident")}},{name:"Opera",versionRegexes:[De,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:R("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:R("firefox")},{name:"Safari",versionRegexes:[De,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(M(e,"safari")||M(e,"mobile/"))&&M(e,"applewebkit")}}]),oses:u([{name:"Windows",search:R("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return M(e,"iphone")||M(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:R("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:R("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:R("linux"),versionRegexes:[]},{name:"Solaris",search:R("sunos"),versionRegexes:[]},{name:"FreeBSD",search:R("freebsd"),versionRegexes:[]}])},Ce=me((j=o.navigator.userAgent,G=Ee.browsers(),J=Ee.oses(),Q=C(G,I=j).map(function(e){var n=ge(e.versionRegexes,I);return{current:e.name,version:n}}).fold(Oe,Se),Z=C(J,B=j).map(function(e){var n=ge(e.versionRegexes,B);return{current:e.name,version:n}}).fold(Le,Ae),{browser:Q,os:Z,deviceType:(F=Q,X=j,q=function(e){return o.window.matchMedia(e).matches},U=(_=Z).isiOS()&&!0===/ipad/i.test(X),W=_.isiOS()&&!U,z=_.isiOS()||_.isAndroid(),H=z||q("(pointer:coarse)"),V=U||!W&&z&&q("(min-device-width:768px)"),$=W||z&&!V,K=F.isSafari()&&_.isiOS()&&!1===/safari/i.test(X),Y=!$&&!V&&!K,{isiPad:u(U),isiPhone:u(W),isTablet:u(V),isPhone:u($),isTouch:u(H),isAndroid:_.isAndroid,isiOS:_.isiOS,isWebView:u(K),isDesktop:u(Y)})})),Me=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:u(e)}},Re={fromHtml:function(e,n){var t=(n||o.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw o.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Me(t.childNodes[0])},fromTag:function(e,n){var t=(n||o.document).createElement(e);return Me(t)},fromText:function(e,n){var t=(n||o.document).createTextNode(e);return Me(t)},fromDom:Me,fromPoint:function(e,n,t){var r=e.dom();return ne.from(r.elementFromPoint(n,t)).map(Me)}},Pe=fe,je=ae;function Ie(e,n,t,r,o){return e(t,r)?ne.some(t):ue(o)&&o(t)?ne.none():n(t,r,o)}function Be(e,n,t){for(var r=e.dom(),o=ue(t)?t:u(!1);r.parentNode;){r=r.parentNode;var i=Re.fromDom(r);if(n(i))return ne.some(i);if(o(i))break}return ne.none()}function _e(e){return ne.from(e.dom().parentNode).map(Re.fromDom)}function Fe(e){return m(e.dom().childNodes,Re.fromDom)}function Xe(e){return n=e.dom().childNodes,ne.from(n[0]).map(Re.fromDom);var n}function qe(e,n){var t,r,o,i,u,c,s=(t=e,x(r=Re.fromTag(n),O(t)),r);return c=s,_e(u=e).each(function(e){e.dom().insertBefore(c.dom(),u.dom())}),i=s,v(Fe(e),function(e){var n;n=e,i.dom().appendChild(n.dom())}),null!==(o=e.dom()).parentNode&&o.parentNode.removeChild(o),s}function Ue(e,n,t){return Be(e,function(e){return P(e,n)},t)}function We(i){function u(e){return"ol"===h(e)||"ul"===h(e)}function e(){Ie(function(e,n){return n(e)},Be,Re.fromDom(i.selection.getNode()),u,void 0).fold(function(){en(i,["card"])||i.execCommand("InsertUnorderedList",!1,{"list-attributes":{"class":"tox-checklist"}})},function(e){i.undoManager.transact(function(){A(e,"tox-checklist")?i.execCommand("RemoveList"):T(qe(e,"ul"),"tox-checklist")})})}i.ui.registry.addToggleButton("ch-checklist",{icon:"checklist",tooltip:"Insert Checklist",onAction:e,onSetup:function(n){function t(e){return n=o,e.dom()===n.dom()||u(e);var n}function r(e){return n.setActive(!i.readonly&&Ie(P,Ue,Re.fromDom(e),".tox-checklist",t).isSome())}function e(e){return r(e.element)}var o=Re.fromDom(i.getBody());return i.on("NodeChange",e),r(i.selection.getNode()),function(){return i.off("NodeChange",e)}}}),i.ui.registry.addMenuItem("ch-checklist",{icon:"checklist",text:"Checklist",onAction:e})}function ze(e,n){return void 0!==e?e:void 0!==n?n:0}function He(e){return"li"===h(e)&&_e(e).filter(function(e){return"ul"===h(e)&&A(e,"tox-checklist")}).isSome()}function Ve(e){return t="tox-checklist--checked",y(n=e)?n.dom().classList.toggle(t):(o=t,(d(k(r=n),o)?N:b)(r,o));var n,t,r,o}function $e(e){return d(["ul","ol","dl"],h(e))}function Ke(e){return ne.from(e).filter(function(e){return A(e,"tox-checklist")}).bind(Xe).map(function(e){"li"===h(e)&&Xe(e).exists(function(e){return"ul"===h(e)})&&T(e,"tox-checklist--hidden")}),e}function Ye(e){e.on("ListMutation",function(e){var n=ne.from(e.element).map(Re.fromDom);"IndentList"===e.action||"OutdentList"===e.action?n.map(Ke).map(function(e){return v((n="ul",(r=void 0===(t=e)?o.document:t.dom()).nodeType!==Pe&&r.nodeType!==je||0===r.childElementCount?[]:m(r.querySelectorAll(n),Re.fromDom)),Ke);var n,t,r}):"ToggleUlList"!==e.action&&"ToggleOlList"!==e.action&&"ToggleDLList"!==e.action||n.filter($e).map(function(e){L(e,"tox-checklist"),v(Fe(e),function(e){return L(e,"tox-checklist--checked"),0})})})}Ce.get().browser.isIE(),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r]}("element","offset");var Ge=function(t,r){return{left:u(t),top:u(r),translate:function(e,n){return Ge(t+e,r+n)}}},Je=Ge,Qe=function(e){var n,t,r,o=e.dom(),i=o.ownerDocument.body;return i===o?Je(i.offsetLeft,i.offsetTop):null!=(r=de(t=e)?t.dom().parentNode:t.dom())&&r.ownerDocument.body.contains(r)?(n=o.getBoundingClientRect(),Je(n.left,n.top)):Je(0,0)};Ze.add("cherry-checklist",function(r){var u,c,e;r.on("init",function(){var e,n,t;e=r.plugins,n=e,t="lists",(re.call(n,t)?ne.from(e.lists):ne.none()).isNone()&&r.windowManager.alert("Please use the Checklist Plugin together with the Lists plugin.")}),Ye(r),We(r),(e=r).shortcuts.add("meta+13","Check checklist item",function(){v(e.selection.getSelectedBlocks(),function(e){var n=Re.fromDom(e);He(n)&&Ve(n)})}),u=r,c=me(ne.none()),u.on("mousedown touchstart",function(e){var n,t,r,o,i=Re.fromDom(e.target);o=e,!c.get().exists(function(e){return"touchstart"===e.type&&"mousedown"===o.type&&o.timeStamp-e.timeStamp<250})&&(n=i,t="touchstart"===(r=e).type?r.touches[0].clientX:r.clientX,ne.from(n).filter(He).exists(function(e){return t<function(e){var n=e.dom().ownerDocument,t=n.body,r=n.defaultView,o=n.documentElement;if(t===e.dom())return Je(t.offsetLeft,t.offsetTop);var i=ze(r.pageYOffset,o.scrollTop),u=ze(r.pageXOffset,o.scrollLeft),c=ze(o.clientTop,t.clientTop),s=ze(o.clientLeft,t.clientLeft);return Qe(e).translate(u-s,i-c)}(e).left()}))&&(c.set(ne.some(e)),u.undoManager.transact(function(){e.preventDefault(),Ve(i)}))})})}()}();